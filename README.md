# kargner

**–î–æ—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –¥–ª—è –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤ (INTERMEDIARY) –∏ –º–∞—Å—Ç–µ—Ä–æ–≤ (MASTER)**

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Next.js, Prisma, NextAuth, Tailwind CSS –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç PWA + push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

## üöÄ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- Frontend: Next.js (App Router)
- –ë–µ–∫–µ–Ω–¥: API Routes (Next.js)
- ORM: Prisma
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: NextAuth.js (CredentialsProvider + JWT)
- –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è: Tailwind CSS
- PWA: `next-pwa`, —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä, –º–∞–Ω–∏—Ñ–µ—Å—Ç
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: `web-push`, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–¥–ø–∏—Å–æ–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ —Ä–æ–ª–∏
- **User**: –º–∞—Å—Ç–µ—Ä –∏–ª–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ (MASTER / INTERMEDIARY), –ø—Ä–æ—Ñ–∏–ª—å, –±–∞–ª–∞–Ω—Å, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, —Ä–µ–π—Ç–∏–Ω–≥ –∏ —Ç.–¥.
- **Announcement**: –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º, –æ–ø–∏—Å–∞–Ω–∏–µ–º, —Ü–µ–Ω–æ–π, —Å—Ç–∞—Ç—É—Å–æ–º, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º.
- **Bid**: —Å—Ç–∞–≤–∫–∞ –º–∞—Å—Ç–µ—Ä–∞ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ. –ü—Ä–∏ –Ω–æ–≤–æ–π/–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π —Å—Ç–∞–≤–∫–µ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.
- **Order**: –∑–∞–∫–∞–∑, —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç–∞–≤–∫–∏, —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –º–∞—Å—Ç–µ—Ä–∞ –∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞, –∫–æ–º–∏—Å—Å–∏—é.
- **PushSubscription**: PWA-–ø–æ–¥–ø–∏—Å–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
/src
  /app           ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (App Router)
    /api         ‚Äî API Routes –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –∏ push
    /announcements
    /orders
    /profile
    /login
    /register
  /components    ‚Äî UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (BidForm, OrderCard, ProfileCard, WalletSection, EditProfileForm)
  /lib           ‚Äî —É—Ç–∏–ª–∏—Ç—ã (Prisma, webpush, auth)
  /types         ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
/prisma
  schema.prisma  ‚Äî —Å—Ö–µ–º–∞ –ë–î –∏ –º–æ–¥–µ–ª–∏
  /migrations    ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏
/public
  /uploads       ‚Äî –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  manifest.json  ‚Äî –º–∞–Ω–∏—Ñ–µ—Å—Ç PWA
  /icons         ‚Äî –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
next.config.js  ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js –∏ PWA

```  

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone <URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
   cd kargner
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   npm install
   ```

3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞—Ç—å `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`):
   ```ini
   DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE"
   NEXTAUTH_SECRET="<—Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è JWT>"
   VAPID_PUBLIC_KEY="<–≤–∞—à VAPID_PUBLIC_KEY>"
   VAPID_PRIVATE_KEY="<–≤–∞—à VAPID_PRIVATE_KEY>"
   ```

4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç Prisma:
   ```bash
   npx prisma migrate deploy
   npx prisma generate
   ```

5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
   ```bash
   npm run dev
   ```

Application –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:3000

## üåê PWA –∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç.
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è push:
  1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å VAPID-–∫–ª—é—á–∏ –∫–æ–º–∞–Ω–¥–æ–π:
     ```bash
     npx web-push generate-vapid-keys
     ```
  2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å `VAPID_PUBLIC_KEY` –∏ `VAPID_PRIVATE_KEY` –≤ `.env`.
  3. –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –≤—ã–∑–≤–∞—Ç—å `navigator.serviceWorker.ready` –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/push/subscribe`.

## üìÑ –°–∫—Ä–∏–ø—Ç—ã
- `npm run dev` ‚Äî –∑–∞–ø—É—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `npm run build` ‚Äî —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `npm run start` ‚Äî –∑–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–∞
- `npx prisma studio` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

## üîÆ –î–∞–ª—å–Ω–µ–π—à–∏–µ –ø–ª–∞–Ω—ã
- –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å –æ—Ç–∑—ã–≤–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –º–∞—Å—Ç–µ—Ä–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—ã (Stripe)
- –Æ–Ω–∏—Ç- –∏ e2e-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## ‚öñÔ∏è –õ–∏—Ü–µ–Ω–∑–∏—è
MIT
